<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>[Android] Recyclerview에 Header를 달기 - RICHPIN의 블로그</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="RICHPIN의 블로그" property="og:site_name">
  
    <meta content="[Android] Recyclerview에 Header를 달기" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="가장 간단명료했던 방법" property="og:description">
  
  
    <meta content="http://0.0.0.0:4000/recyclerview-header-post/" property="og:url">
  
  
    <meta content="2021-12-12T00:00:00+09:00" property="article:published_time">
    <meta content="http://0.0.0.0:4000/about/" property="article:author">
  
  
    <meta content="http://0.0.0.0:4000/assets/img/drawing_banner.png" property="og:image">
  
  
    
  
  
    
    <meta content="Android" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
  
    <meta name="twitter:title" content="[Android] Recyclerview에 Header를 달기">
  
  
    <meta name="twitter:url" content="http://0.0.0.0:4000/recyclerview-header-post/">
  
  
    <meta name="twitter:description" content="가장 간단명료했던 방법">
  
  
    <meta name="twitter:image:src" content="http://0.0.0.0:4000/assets/img/drawing_banner.png">
  

	<meta name="description" content="가장 간단명료했던 방법">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700|Lato:300,400,700&display=swap" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/github_profile(smaller).jpeg" alt="RICHPIN"></a>
      </div>
      <div class="author-name">RICHPIN</div>
      <p>Junior Developer</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://instagram.com/nothinbutperson" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/richpin" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="email"><a href="mailto:richpinkr99@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2022 © RICHPIN</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src="/assets/img/drawing_banner.png" alt="[Android] Recyclerview에 Header를 달기">
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">[Android] Recyclerview에 Header를 달기</h1>
        <div class="page-date"><span>2021, Dec 12    </span></div>
      </header>
      <p><code class="language-plaintext highlighter-rouge">Recyclerview</code>를 다루다 보면 가장 위에 다른 형태의 컨텐츠를 달아야 할 때가 있을 것입니. 제가 말하고자 하는 것은 항상 고정되어 있는 형태가 아닌 <code class="language-plaintext highlighter-rouge">Recyclerview</code>와 같이 <code class="language-plaintext highlighter-rouge">scroll</code>이 가능한 즉, <code class="language-plaintext highlighter-rouge">Header</code>를 다는 것입니다. 저의 경우에는 SNS처럼 커뮤니티 기능을 만드는 도중 가장 위에 마치 게시판같이 환영 멘트, 새로운 정보, 광고 등의 정보를 달 공간이 필요했습니다. 그리고 제가 원하는 것은 고정되어 있는 것이 아닌 <code class="language-plaintext highlighter-rouge">Recyclerview</code>와 같이 스크롤이 되는 관계였습니다.</p>

<h1 id="무슨-방법들이-있을까">무슨 방법들이 있을까?</h1>

<p>이와 같은 문제를 구글링 해보면 가장 흔하게 접하는 것이 바로 <code class="language-plaintext highlighter-rouge">Nested Scroll View</code>를 이용하라는 것입니. 여러 <code class="language-plaintext highlighter-rouge">Layout</code>들을 묶어 마치 하나처럼 <code class="language-plaintext highlighter-rouge">scroll</code> 되는 이 방법을 저도 제일 처음으로 써보았습니다. 동작 자체는 원하는 대로 되었지만, 성능의 문제가 발생했습니다. 아무래도 커뮤니티인만큼 굉장히 동적으로 동작하는 <code class="language-plaintext highlighter-rouge">Recyclerview</code>라서 그런지 전에 없었던 버벅임이 도저히 감당할 수 없을 정도로 심했습니다. 이해가 가지 않어 원인을 찾아보려 애썼지만 결국 포기가 더 빨랐네요… <img class="emoji" title=":sweat_smile:" alt=":sweat_smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png" height="20" width="20"></p>

<p>두 번째 시도했던 방법은 <code class="language-plaintext highlighter-rouge">Header</code>를 <code class="language-plaintext highlighter-rouge">Recyclerview</code>의 첫번째 아이템으로 다루는 방법입니다. 아이템이 첫번째라면 다른 아이템 타입을 적용시켜 관리하는 방법은 언뜻 보기에도 그렇게 끌리지는 않았습니다. 뭔가 깔끔하기 보다 억지로 우겨넣는(?) 방법인 것처럼 느껴졌기 때문입니다. 하지만, 해결도 제대로 안되면서 깔끔한 방식, 코드만 찾는 저의 습성때문에 피 본 날이 하루가 아니니 그래도 시도는 해보았네요. 제가 제대로 신경을 못쓴 것이겠지만, 역시나 어플이 뻑이 가버렸습니다. 원인을 파악할 의지도 없었습니다. 도대체 왜 제가 생각하는 깔끔한 방법이 없는 것인지…항상 이렇습니다. <img class="emoji" title=":joy:" alt=":joy:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png" height="20" width="20"> 그러다 정말 우여곡절 끝에 우연히 딱 맘에 드는 방법을 찾아 이 글을 쓰게 되었습니다.</p>

<h1 id="제가-소개하는-방법">제가 소개하는 방법</h1>

<p>이 방법은 <code class="language-plaintext highlighter-rouge">RecyclerView</code>가 그대로 <code class="language-plaintext highlighter-rouge">RecyclerView</code>인 채로 존재할 수 있어서(xml 처리가 다여서) 가장 깔끔했습니다.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;androidx.coordinatorlayout.widget.CoordinatorLayout</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;com.google.android.material.appbar.AppBarLayout</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">app:elevation=</span><span class="s">"0dp"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;RelativeLayout</span>
            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
            <span class="na">android:background=</span><span class="s">"@color/white"</span>
            <span class="na">app:layout_scrollFlags=</span><span class="s">"scroll|enterAlwaysCollapsed"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;ImageView</span>
                <span class="na">android:id=</span><span class="s">"@+id/banner"</span>
                <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
                <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
                <span class="na">android:adjustViewBounds=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/RelativeLayout&gt;</span>

    <span class="nt">&lt;/com.google.android.material.appbar.AppBarLayout&gt;</span>

    <span class="nt">&lt;androidx.recyclerview.widget.RecyclerView</span>
        <span class="na">android:id=</span><span class="s">"@+id/recyclerview"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">app:layout_behavior=</span><span class="s">"@string/appbar_scrolling_view_behavior"</span>
        <span class="na">android:overScrollMode=</span><span class="s">"never"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;/androidx.recyclerview.widget.RecyclerView&gt;</span>
<span class="nt">&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">CoordinatorLayout</code>의 <code class="language-plaintext highlighter-rouge">AppBarLayout</code>을 이용하여 본래 <code class="language-plaintext highlighter-rouge">AppBar</code>(상단 툴바라고 생각하면 편함.)로 쓰여질 공간에 Header 컨텐츠를 넣는 것입니다. 따라서 <code class="language-plaintext highlighter-rouge">AppBar</code>로서의 이질감을 없애기 위해 <code class="language-plaintext highlighter-rouge">elevation</code>을 <code class="language-plaintext highlighter-rouge">0dp</code>로 주었습니다. 위와 같이 <code class="language-plaintext highlighter-rouge">AppBar</code>안의 <code class="language-plaintext highlighter-rouge">Layout</code>에 <code class="language-plaintext highlighter-rouge">app:layout_scrollFlags="scroll"</code>과 <code class="language-plaintext highlighter-rouge">Recyclerview</code>에 <code class="language-plaintext highlighter-rouge">app:layout_behavior="@string/appbar_scrolling_view_behavior"</code>을 해주면 이들은 마치 하나같이 <code class="language-plaintext highlighter-rouge">scroll</code>을 가능케 합니다. 추가적으로 <code class="language-plaintext highlighter-rouge">app:layout_scrollFlags</code>에는 <code class="language-plaintext highlighter-rouge">"enterAlways", "enterAlwaysCollapsed", "exitUntilCollapsed"</code> 기능이 있는데 이는 <code class="language-plaintext highlighter-rouge">scroll</code>시 <code class="language-plaintext highlighter-rouge">AppBar</code>가 노출되는 양상을 각기 다르게 나타나기에 취향껏 고르시면 됩니다. 더불어, <code class="language-plaintext highlighter-rouge">RecyclerView</code>특유의 <code class="language-plaintext highlighter-rouge">scroll</code>시 그림자가 생겨서 <code class="language-plaintext highlighter-rouge">AppBar</code>와의 이질감을 형성하기 때문에 <code class="language-plaintext highlighter-rouge">android:overScrollMode="never"</code>까지 설정해주면 좋습니다. <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"></p>

      <div class="page-footer">
        <div class="page-tag">
          
            <a href="/tags#Android" class="tag"># Android</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//richpin.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
